<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>randotools</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">randotools</h1>



<p>Randomisation is one of the key aspects of clinical trials, ensuring
that treatment groups are balanced and that the results are not biased.
The <code>randotools</code> package provides functions to create
randomisation lists in R, with a focus on flexibility and ease of
use.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(randotools)</span></code></pre></div>
<div id="creating-randomization-lists" class="section level2">
<h2>Creating randomization lists</h2>
<p>Randomisation lists are easily created with the
<code>randolist</code> function. Specify the number of participants to
randomise (per strata, if there are any), any strata, the arms to
randomise between, and the block sizes.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">randolist</span>(<span class="at">n =</span> <span class="dv">20</span>, <span class="at">arms =</span> <span class="fu">c</span>(<span class="st">&quot;Trt1&quot;</span>, <span class="st">&quot;Trt2&quot;</span>))</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="co">#&gt;    seq_in_strata block_in_strata blocksize seq_in_block  arm</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="co">#&gt; 1              1               1         6            1 Trt1</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="co">#&gt; 2              2               1         6            2 Trt2</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="co">#&gt; 3              3               1         6            3 Trt1</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="co">#&gt; 4              4               1         6            4 Trt1</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="co">#&gt; 5              5               1         6            5 Trt2</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="co">#&gt; 6              6               1         6            6 Trt2</span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a><span class="co">#&gt; 7              7               2         4            1 Trt2</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a><span class="co">#&gt; 8              8               2         4            2 Trt1</span></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a><span class="co">#&gt; 9              9               2         4            3 Trt2</span></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a><span class="co">#&gt; 10            10               2         4            4 Trt1</span></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a><span class="co">#&gt; 11            11               3         4            1 Trt1</span></span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a><span class="co">#&gt; 12            12               3         4            2 Trt2</span></span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a><span class="co">#&gt; 13            13               3         4            3 Trt2</span></span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a><span class="co">#&gt; 14            14               3         4            4 Trt1</span></span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a><span class="co">#&gt; 15            15               4         4            1 Trt1</span></span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a><span class="co">#&gt; 16            16               4         4            2 Trt1</span></span>
<span id="cb2-19"><a href="#cb2-19" tabindex="-1"></a><span class="co">#&gt; 17            17               4         4            3 Trt2</span></span>
<span id="cb2-20"><a href="#cb2-20" tabindex="-1"></a><span class="co">#&gt; 18            18               4         4            4 Trt2</span></span>
<span id="cb2-21"><a href="#cb2-21" tabindex="-1"></a><span class="co">#&gt; 19            19               5         4            1 Trt2</span></span>
<span id="cb2-22"><a href="#cb2-22" tabindex="-1"></a><span class="co">#&gt; 20            20               5         4            2 Trt1</span></span>
<span id="cb2-23"><a href="#cb2-23" tabindex="-1"></a><span class="co">#&gt; 21            21               5         4            3 Trt1</span></span>
<span id="cb2-24"><a href="#cb2-24" tabindex="-1"></a><span class="co">#&gt; 22            22               5         4            4 Trt2</span></span></code></pre></div>
<p>In the above call,</p>
<ul>
<li><code>n</code> specifies the number of participants to randomise per
stratum. In this case, we are randomising 20 participants in a single
stratum.</li>
<li><code>arms</code> specifies the names of the arms to randomise
between.</li>
</ul>
<p>Any number of arms can be specified, so <code>randolist</code> can be
used for trials with two, three, even 10 or more arms, so platform
trials can be accommodated by <code>randolist</code>, although
implementing them within the database is not trivial.</p>
<div id="block-randomisation" class="section level3">
<h3>Block randomisation</h3>
<p>By default, <code>randolist</code> uses block randomisation - rather
than using random selection along the whole list in the hope that the
arms are balanced, it creates blocks of randomisation, whereby each
block is balanced, and block sizes are chosen at random. This not only
helps with balancing, but also makes it harder to guess the next
allocation. Block sizes are controlled via the <code>blocksizes</code>
argument, where the values should be the potential number of each arm to
include in any given block. E.g. <code>c(1,2)</code> would produce
blocks with either one of each arm, or two of each arm, for a total
block size or 2 or 4.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>r <span class="ot">&lt;-</span> <span class="fu">randolist</span>(<span class="at">n =</span> <span class="dv">10</span>, </span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>               <span class="at">arms =</span> <span class="fu">c</span>(<span class="st">&quot;Trt1&quot;</span>, <span class="st">&quot;Trt2&quot;</span>), </span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>               <span class="at">blocksizes =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span></code></pre></div>
<p>Additionally, <code>blocksizes</code> are selected approximately
proportional to Pascalâ€™s Triangle, so that medium sizes blocks are more
likely to be selected than small or large blocks. This is done to ensure
that the randomisation list is not too predictable, and helps with
balance by reducing the chance of finishing mid-way through a large
block.</p>
<p>To disable block randomisation, set the block size to <code>n</code>
divided by the number of arms (in this case <code>n</code>/2, so
10):</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">randolist</span>(<span class="at">n =</span> <span class="dv">20</span>, </span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>          <span class="at">arms =</span> <span class="fu">c</span>(<span class="st">&quot;Trt1&quot;</span>, <span class="st">&quot;Trt2&quot;</span>),</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>          <span class="at">blocksizes =</span> <span class="dv">10</span>)</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="co">#&gt;    seq_in_strata block_in_strata blocksize seq_in_block  arm</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="co">#&gt; 1              1               1        20            1 Trt2</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="co">#&gt; 2              2               1        20            2 Trt1</span></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a><span class="co">#&gt; 3              3               1        20            3 Trt2</span></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a><span class="co">#&gt; 4              4               1        20            4 Trt1</span></span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a><span class="co">#&gt; 5              5               1        20            5 Trt2</span></span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a><span class="co">#&gt; 6              6               1        20            6 Trt2</span></span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a><span class="co">#&gt; 7              7               1        20            7 Trt1</span></span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a><span class="co">#&gt; 8              8               1        20            8 Trt2</span></span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a><span class="co">#&gt; 9              9               1        20            9 Trt2</span></span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a><span class="co">#&gt; 10            10               1        20           10 Trt1</span></span>
<span id="cb4-15"><a href="#cb4-15" tabindex="-1"></a><span class="co">#&gt; 11            11               1        20           11 Trt2</span></span>
<span id="cb4-16"><a href="#cb4-16" tabindex="-1"></a><span class="co">#&gt; 12            12               1        20           12 Trt1</span></span>
<span id="cb4-17"><a href="#cb4-17" tabindex="-1"></a><span class="co">#&gt; 13            13               1        20           13 Trt1</span></span>
<span id="cb4-18"><a href="#cb4-18" tabindex="-1"></a><span class="co">#&gt; 14            14               1        20           14 Trt2</span></span>
<span id="cb4-19"><a href="#cb4-19" tabindex="-1"></a><span class="co">#&gt; 15            15               1        20           15 Trt1</span></span>
<span id="cb4-20"><a href="#cb4-20" tabindex="-1"></a><span class="co">#&gt; 16            16               1        20           16 Trt1</span></span>
<span id="cb4-21"><a href="#cb4-21" tabindex="-1"></a><span class="co">#&gt; 17            17               1        20           17 Trt1</span></span>
<span id="cb4-22"><a href="#cb4-22" tabindex="-1"></a><span class="co">#&gt; 18            18               1        20           18 Trt1</span></span>
<span id="cb4-23"><a href="#cb4-23" tabindex="-1"></a><span class="co">#&gt; 19            19               1        20           19 Trt2</span></span>
<span id="cb4-24"><a href="#cb4-24" tabindex="-1"></a><span class="co">#&gt; 20            20               1        20           20 Trt2</span></span></code></pre></div>
<p>The <code>blockrand</code> function can also be used for
non-stratified randomisation lists.</p>
</div>
<div id="stratified-randomisation-lists" class="section level3">
<h3>Stratified randomisation lists</h3>
<p>It is very common to need a stratified randomisation where the
randomisation is balanced within strata. This is done by specifying the
<code>strata</code> argument, which should be a list of the stratifying
variables. The function will then create a randomisation list for each
stratum, and combine them into a single list. The list for each strata
contains <code>n</code> participants.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>rs <span class="ot">&lt;-</span> <span class="fu">randolist</span>(<span class="at">n =</span> <span class="dv">10</span>, </span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>                <span class="at">strata =</span> <span class="fu">list</span>(<span class="at">sex =</span> <span class="fu">c</span>(<span class="st">&quot;Male&quot;</span>, <span class="st">&quot;Female&quot;</span>),</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>                              <span class="at">age =</span> <span class="fu">c</span>(<span class="st">&quot;Teen&quot;</span>, <span class="st">&quot;Adult&quot;</span>)))</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="fu">table</span>(rs<span class="sc">$</span>sex)</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="co">#&gt;   Male Female </span></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a><span class="co">#&gt;     20     24</span></span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a><span class="fu">table</span>(rs<span class="sc">$</span>sex, rs<span class="sc">$</span>arm)</span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a><span class="co">#&gt;         </span></span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a><span class="co">#&gt;           A  B</span></span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a><span class="co">#&gt;   Male   10 10</span></span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a><span class="co">#&gt;   Female 12 12</span></span></code></pre></div>
<p>By using factors to specify the strata, the labels and levels are
available for use when exporting the randomisation list, which is useful
for importing into electronic data capture systems such as REDCap, which
requires a specific format.</p>
</div>
<div id="unbalanced-randomisation-lists" class="section level3">
<h3>Unbalanced randomisation lists</h3>
<p>It is not uncommon to have unbalanced randomisation lists. E.g. 2
control participants per experimental participant. This is easily done
by changing the <code>arms</code> argument:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>r2 <span class="ot">&lt;-</span> <span class="fu">randolist</span>(<span class="at">n =</span> <span class="dv">10</span>, </span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>               <span class="at">arms =</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>))</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="fu">table</span>(r2<span class="sc">$</span>arm)</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="co">#&gt;  A  B </span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a><span class="co">#&gt; 10  5</span></span></code></pre></div>
<p>Adaptive trials sometimes modify the randomisation balance part way
through a trial, which can be accomplished via this method.</p>
</div>
</div>
<div id="summarizing-randomisation-lists" class="section level2">
<h2>Summarizing randomisation lists</h2>
<p>It can be helpful to summarize the randomisation list to check that
the requirements, such as the balance, coding, etc, are met. The
<code>randolist</code> package includes a <code>summary</code> precisely
for this purpose:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="fu">randolist</span>(<span class="at">n =</span> <span class="dv">20</span>, <span class="at">arms =</span> <span class="fu">c</span>(<span class="st">&quot;Trt1&quot;</span>, <span class="st">&quot;Trt2&quot;</span>)) <span class="sc">|&gt;</span> <span class="fu">summary</span>()</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="co">#&gt; ---- Randomisation list report ----</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="co">#&gt; -- Overall</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="co">#&gt; Total number of randomisations:  22 </span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="co">#&gt; Randomisation groups:  Trt1 : Trt2 </span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="co">#&gt; Randomisation ratio: 1:1 </span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a><span class="co">#&gt; Randomisations to each arm:</span></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a><span class="co">#&gt; Trt1 Trt2 </span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a><span class="co">#&gt;   11   11 </span></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a><span class="co">#&gt; Block sizes:</span></span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a><span class="co">#&gt; 4 6 </span></span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a><span class="co">#&gt; 4 1</span></span></code></pre></div>
<p>The summary for stratified randomisation lists also includes
information at the strata level.</p>
</div>
<div id="exporting-randomisation-lists" class="section level2">
<h2>Exporting randomisation lists</h2>
<p>Once a randomisation list is created, it needs to be transferred into
a system that will ultimately perform the randomisation. We primarily
use two systems for this: REDCap and SecuTrial, but you might use
others, which may require other modifications. The
<code>randolist</code> package includes a function to convert the
randomisation list into a format that should be, with minimal effort, be
importable into these systems.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co"># create a very small randomisation list for demonstration purposes</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>rs2 <span class="ot">&lt;-</span> <span class="fu">randolist</span>(<span class="at">n =</span> <span class="dv">2</span>, <span class="at">blocksizes =</span> <span class="dv">1</span>,</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>                 <span class="at">arms =</span> <span class="fu">c</span>(<span class="st">&quot;Aspirin&quot;</span>, <span class="st">&quot;Placebo&quot;</span>),</span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>                 <span class="at">strata =</span> <span class="fu">list</span>(<span class="at">sex =</span> <span class="fu">c</span>(<span class="st">&quot;Male&quot;</span>, <span class="st">&quot;Female&quot;</span>),</span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>                               <span class="at">age =</span> <span class="fu">c</span>(<span class="st">&quot;Teen&quot;</span>, <span class="st">&quot;Adult&quot;</span>)))</span></code></pre></div>
<p>The <code>randolist_to_db</code> function is used to convert the
randomisation list into a format that can be imported into the system.
The function takes the randomisation list as input, and converts it to a
data frame with the columns appropriate for the target database
(<code>target_db</code>). In the case of REDCap, it is necessary to
provide a data frame which maps the arms provided in
<code>randolist</code> to the database variables.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">randolist_to_db</span>(rs2, <span class="at">target_db =</span> <span class="st">&quot;REDCap&quot;</span>, </span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>                <span class="at">rando_enc =</span> <span class="fu">data.frame</span>(<span class="at">arm =</span> <span class="fu">c</span>(<span class="st">&quot;Aspirin&quot;</span>, <span class="st">&quot;Placebo&quot;</span>),</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>                                       <span class="at">rand_result =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)),</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>                <span class="at">strata_enc =</span> <span class="fu">list</span>(<span class="at">sex =</span> <span class="fu">data.frame</span>(<span class="at">sex =</span> <span class="fu">c</span>(<span class="st">&quot;Male&quot;</span>, <span class="st">&quot;Female&quot;</span>), <span class="at">code =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>),</span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>                                  <span class="at">age =</span> <span class="fu">data.frame</span>(<span class="at">age =</span> <span class="fu">c</span>(<span class="st">&quot;Teen&quot;</span>, <span class="st">&quot;Adult&quot;</span>), <span class="at">code =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)))</span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="co">#&gt;   rand_result sex age</span></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a><span class="co">#&gt; 1           1   1   1</span></span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a><span class="co">#&gt; 2           2   1   1</span></span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a><span class="co">#&gt; 3           1   2   1</span></span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a><span class="co">#&gt; 4           2   2   1</span></span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a><span class="co">#&gt; 5           2   1   2</span></span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a><span class="co">#&gt; 6           1   1   2</span></span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a><span class="co">#&gt; 7           1   2   2</span></span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a><span class="co">#&gt; 8           2   2   2</span></span></code></pre></div>
<p>SecuTrial uses a more standardised format, so
<code>rando_encoding</code> is not required.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="fu">randolist_to_db</span>(rs2, <span class="at">target_db =</span> <span class="st">&quot;secuTrial&quot;</span>,</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>                <span class="at">strata_enc =</span> <span class="fu">list</span>(<span class="at">sex =</span> <span class="fu">data.frame</span>(<span class="at">sex =</span> <span class="fu">c</span>(<span class="st">&quot;Male&quot;</span>, <span class="st">&quot;Female&quot;</span>), <span class="at">code =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>),</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a>                                  <span class="at">age =</span> <span class="fu">data.frame</span>(<span class="at">age =</span> <span class="fu">c</span>(<span class="st">&quot;Teen&quot;</span>, <span class="st">&quot;Adult&quot;</span>), <span class="at">code =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)))</span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="co">#&gt;   Number   Group       sex       age</span></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="co">#&gt; 1      1 Aspirin value = 1 value = 1</span></span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a><span class="co">#&gt; 2      2 Placebo value = 1 value = 1</span></span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a><span class="co">#&gt; 3      3 Aspirin value = 2 value = 1</span></span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a><span class="co">#&gt; 4      4 Placebo value = 2 value = 1</span></span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a><span class="co">#&gt; 5      5 Placebo value = 1 value = 2</span></span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a><span class="co">#&gt; 6      6 Aspirin value = 1 value = 2</span></span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a><span class="co">#&gt; 7      7 Aspirin value = 2 value = 2</span></span>
<span id="cb10-12"><a href="#cb10-12" tabindex="-1"></a><span class="co">#&gt; 8      8 Placebo value = 2 value = 2</span></span></code></pre></div>
<p>The dataframe returned can then be exported to CSV or xlsx and
imported into the relevant database.</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
